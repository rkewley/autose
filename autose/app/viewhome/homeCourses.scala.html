@(vCourses: MdlCourses)

@import persistence._
@import utilities.FileGroup

@coursePage(vCourses) { 
   <div>

	<div class="column span-14 colborder">
		<h3>@vCourses.vCourseName</h3>
		<div>@vCourses.vCourseDescriptionWebsite</div>
		<hr>
		
		 <h4>@vCourses.vCourseIDNumber References</h4>
		 <ul>
		 @defining(SqlCourseReferences.selectWhere("Course = " + vCourses.vidCourse)) { listCourseReferences =>
		     @defining(listCourseReferences.map(r=>"idReference = " + r.vReference).mkString(" OR ")) { whereClause =>
		       @if(whereClause.length > 0) {
		         @defining(SqlReference.selectWhere(whereClause)) { listReferences =>
		           @listReferences.map { vReference =>
			         <li><a href="@vReference.vLink">@vReference.vTitle.</a>  @vReference.vText</li>
			       }
			     }
			   }
			 }
		 }
		 </ul>
	</div>
	
	<div class="column span-4 last">

	  <ul id="menu">
		@defining(FileGroup.getFileGroupsCourseLinks(SqlCourseLinks.selectWhere("Course = " + vCourses.vidCourse + " AND IsFileLink = 1"))) { listCourseLinks =>
       		@listCourseLinks.map { fileGroup =>
         		@if(fileGroup.owner == "Course level file") {
         			  <li id="label">Course level files</li>
         			  @fileGroup.links.map { fgLink =>
         			    <li><a href="@fgLink.href">@fgLink.description</a></li>
         			  } 
         		} else {
         			  <li>"< "@fileGroup.owner
         			    <ul>
         			      @fileGroup.links.map { fgLink =>
         			        <li><a href="@fgLink.href">@fgLink.description</a></li>
         			      }
         			    </ul>
         			  </li>    
         		}
		 	}
	   	}
	  </ul>

		
	  <ul id="menu">
		@defining(FileGroup.getFileGroupsCourseLinks(SqlCourseLinks.selectWhere("Course = " + vCourses.vidCourse + " AND IsFileLink = 0"))) { listCourseLinks =>
       		@listCourseLinks.map { fileGroup =>
         		@if(fileGroup.owner == "Course level file") {
         			  <li id="label">Course level links</li>
         			  @fileGroup.links.map { fgLink =>
         			    <li><a href="@fgLink.href">@fgLink.description</a></li>
         			  } 
         		} else {
         			  <li>@fileGroup.owner
         			    <ul>
         			      @fileGroup.links.map { fgLink =>
         			        <li><a href="@fgLink.href">@fgLink.description</a></li>
         			      }
         			    </ul>
         			  </li>    
         		}
		 	}
	   	}
	  </ul>
	</div>
  </div>
}
	
