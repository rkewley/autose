
@(vTopics: MdlTopics)

    @import persistence._
		  

    
    @topicPage(vTopics) {
	<div>
		 @*<h4>Topic Links</h4>
		 <p><a href="@routes.ReferenceController.listReference">References</a></p> 
		 <p><a href="@routes.TerminalLearningObjectiveController.listSelectedTerminalLearningObjective(vTopics.vTopicsIndex)">Terminal Learning Objectives</a></p>
		 <p><a href="@routes.TopicObjectivesController.listSelectedTopicObjectives(vTopics.vTopicsIndex)">Knowleges and Skills</a></p>
		 <p><a href="@routes.TopicReferencesController.listSelectedTopicReferences(vTopics.vTopicsIndex)">References</a></p>
		 <p><a href="@routes.TopicPictureController.listSelectedTopicPicture(vTopics.vTopicsIndex)">Pictures</a></p>
		 <p><a href="@routes.TopicLinkController.listSelectedTopicLink(vTopics.vTopicsIndex)">Links</a></p>
		 <hr>
		 
		 <h4>Learn More</h4>
		 @defining(SqlTopicLink.selectWhere("Topic=" + vTopics.vTopicsIndex)) { listTopicLink =>
		 
		   @listTopicLink.map { vTopicLink =>
			 <p><a href="@vTopicLink.vLink">@vTopicLink.vDescription</a></p>
		   }
		 
		 }
	  </div>*@

    
     <div class="column span-14 colborder">
		 <h3>@vTopics.vTopic</h3>
		 <p>@Html(vTopics.vTopicShortDescription.toString)</p>
		 <p>@Html(vTopics.vTopicDetailedDescription.toString)</p>
		 <hr>		
		 
		 <h4>@vTopics.vTopic Terminal Learning Objective</h4>
		 <p><em>This objective is expected to be achieved by cadets upon graduation.  It will vary by program.
		 They will learn material related to this objective and be evaluated on that material in one or more courses.</em></p>
		 @defining(SqlTerminalLearningObjective.selectWhere("Topic=" + vTopics.vTopicsIndex)) { listTlo =>
		   <table>
		     <tr>
		       <th>Program</th><th>Terminal Learning Objective</th>
		     @listTlo.map { vTlo =>
			   <tr><td>@vTlo.vProgram</td><td> @vTlo.vTerminalLearningObjective</td></tr>
		     }
		   </table>	  
		 }
		 <hr>
		 
		 <h4>@vTopics.vTopic Knowledge, Skills, Attitudes, and Behaviors</h4>
		 <p><em>These learning objectives are discrete testable skills that support the terminal learning objective.</em></p>
		 @defining(SqlTopicObjectives.selectWhere("Topic=" + vTopics.vTopicsIndex)) { listTopicObjectives =>
		   <ul>
		     @listTopicObjectives.map { vTopicObjectives =>
			   <li>@vTopicObjectives.vKSAB: @vTopicObjectives.vObjective</li>
		     }
		   </ul>	  
		 }
		 
		 <h4>@vTopics.vTopic References</h4>
		 @defining(SqlTopicReferences.selectWhere("Topic = " + vTopics.vTopicsIndex)) { listTopicReferences =>
		   <ul>
		     @defining(listTopicReferences.map(r=>"idReference = " + r.vReference).mkString(" OR ")) { whereClause =>
		       @if(whereClause.length > 0) {
		         @defining(SqlReference.selectWhere(whereClause)) { listReferences =>
		           @listReferences.map { vReference =>
			         <li><a href="@vReference.vLink">@vReference.vTitle.</a>  @vReference.vText</li>
			       }
			     }
			   }
			 }
		   </ul>
		 }
	</div>
   <div class="column span-4 last">
     <h4>Pictures!</h4>
     <p><em><small>Click to enlarge</small></em></p>
   	 @defining(SqlTopicPicture.selectWhere("Topic = " + vTopics.vTopicsIndex)) { listTopicPictures =>
       @listTopicPictures.map { vPicture =>
         <p><a href="@vPicture.vHyperlink"><img src="@vPicture.vHyperlink" alt=@vPicture.vAlternateText width=150></a></p>
		 <p><caption>@vPicture.vCaption</caption></p>
		 <hr class="space">	
	   }
	 }
	 
		 <hr>
		 
		 <h4>Learn More</h4>
		 @defining(SqlTopicLink.selectWhere("Topic=" + vTopics.vTopicsIndex)) { listTopicLink =>
		 
		   @listTopicLink.map { vTopicLink =>
			 <p><a href="@vTopicLink.vLink">@vTopicLink.vDescription</a></p>
		   }
		 
		 }

   </div>
   
   
  </div>
  }
  
